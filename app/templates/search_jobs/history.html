{% extends "base.html" %}
{% block title %}{{ job.name }} - History - {{ app_title }}{% endblock %}
{% block content %}
<h1>{{ job.name }}</h1>
<p><strong>Query:</strong> {{ job.query }}</p>
<p><a href="/search-jobs">&larr; Back to search jobs</a></p>

<h2>Execution History</h2>
{% if executions %}
<table>
    <thead>
        <tr>
            <th>Started</th>
            <th>Finished</th>
            <th>Status</th>
            <th>Found</th>
            <th>New</th>
            <th>Error</th>
        </tr>
    </thead>
    <tbody>
        {% for ex in executions %}
        <tr>
            <td>{{ ex.started_at.strftime('%Y-%m-%d %H:%M') }}</td>
            <td>{{ ex.finished_at.strftime('%Y-%m-%d %H:%M') if ex.finished_at else '-' }}</td>
            <td>{{ ex.status }}</td>
            <td>{{ ex.articles_found }}</td>
            <td>{{ ex.articles_new }}</td>
            <td><small>{{ ex.error_message or '' }}</small></td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p>No executions yet.</p>
{% endif %}
{% endblock %}
